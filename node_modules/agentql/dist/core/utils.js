"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getApiKey = getApiKey;
const config_1 = require("./config");
const errors_1 = require("./errors");
const logger_1 = require("./logger");
const MESSAGE_API_KEY_NOT_SET = `
AgentQL API key is not set.
Please set the AgentQL API key by invoking \`agentql init\` command or by setting the environment variable 'AGENTQL_API_KEY'.
If you don't yet have an AgentQL API key, you can sign up for a free account at https://dev.agentql.com
You could refer to the documentation for more information: https://docs.agentql.com/installation/sdk-installation.
`
    .trim()
    .replace(/\n/g, ' ');
/**
 * Get the AgentQL API key from config or environment variable.
 *
 * @returns The API key
 * @throws APIKeyError if the API key is not set
 */
function getApiKey() {
    if (config_1.config.apiKey) {
        logger_1.logger.debug(`Using API key from config...`);
        return config_1.config.apiKey;
    }
    const apiKey = process.env.AGENTQL_API_KEY;
    logger_1.logger.debug(`Using API key from environment variable...`);
    if (!apiKey) {
        throw new errors_1.APIKeyError(MESSAGE_API_KEY_NOT_SET);
    }
    return apiKey;
}
